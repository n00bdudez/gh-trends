<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GitHub Trending</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
:root{
--bg1:#0d1117;--bg2:#161b22;--bg3:#21262d;
--txt1:#c9d1d9;--txt2:#8b949e;
--acc:#58a6ff;--acc-h:#79c0ff;
--bor:#30363d;--suc:#3fb950;--warn:#d29922
}
[data-theme="light"]{
--bg1:#fff;--bg2:#f6f8fa;--bg3:#fff;
--txt1:#24292f;--txt2:#57606a;
--acc:#0969da;--acc-h:#0550ae;
--bor:#d0d7de;--suc:#1a7f37;--warn:#9a6700
}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg1);color:var(--txt1);line-height:1.6;transition:background .3s,color .3s}
a{text-decoration:none;color:var(--acc)}
a:hover{text-decoration:underline;color:var(--acc-h)}
.flex{display:flex;gap:1rem;align-items:center}
.flex-wrap{flex-wrap:wrap}
header{background:var(--bg2);border-bottom:1px solid var(--bor);padding:1rem;position:sticky;top:0;z-index:100;backdrop-filter:blur(10px)}
.header-wrap{max-width:1400px;margin:0 auto;justify-content:space-between}
h1{font-size:1.5rem;font-weight:600}
.subtitle{color:var(--txt2);font-size:.875rem}
.btn{background:var(--bg3);border:1px solid var(--bor);color:var(--txt2);padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-size:.875rem;transition:all .2s;font-weight:500}
.btn:hover{border-color:var(--acc);color:var(--txt1)}
.btn.active{background:var(--acc);border-color:var(--acc);color:#fff}
.filters{max-width:1400px;margin:1.5rem auto;padding:0 1rem}
main{max-width:1400px;margin:0 auto;padding:1rem}
.stats{justify-content:space-between;margin-bottom:1.5rem;padding:1rem;background:var(--bg2);border:1px solid var(--bor);border-radius:8px}
.stats-item{display:flex;flex-direction:column;gap:.25rem}
.stats-label{font-size:.75rem;color:var(--txt2);text-transform:uppercase;letter-spacing:.5px}
.stats-value{font-size:1.25rem;font-weight:600}
.list{list-style:none;display:flex;flex-direction:column;gap:0.75rem}
.list-item{padding:0.75rem 1rem;border:1px solid var(--bor);border-radius:6px;transition:all .2s;background:var(--bg2)}
.list-item:hover{border-color:var(--acc)}
.list-item a{font-weight:600;font-size:1rem}
.list-item .desc{font-size:.875rem;color:var(--txt2);margin-top:0.25rem}
.list-item .meta{font-size:.75rem;color:var(--txt2);margin-top:0.5rem;display:flex;gap:1rem;flex-wrap:wrap;align-items:center}
.lang-dot{width:10px;height:10px;border-radius:50%;display:inline-block;vertical-align:middle;margin-right:4px}
.skeleton{background:var(--bg2);border:1px solid var(--bor);border-radius:12px;padding:1rem;animation:pulse 1.5s ease-in-out infinite}
.skeleton-title{height:18px;background:var(--bg3);border-radius:4px;margin-bottom:0.5rem;width:60%}
.skeleton-text{height:12px;background:var(--bg3);border-radius:4px;margin-bottom:0.25rem;width:80%}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
footer{text-align:center;padding:2rem 1rem;margin-top:3rem;border-top:1px solid var(--bor);color:var(--txt2);font-size:.875rem}
.error{text-align:center;padding:3rem 1rem;color:var(--txt2)}
@media(max-width:768px){
.header-wrap{flex-direction:column;align-items:flex-start}
.filters{flex-direction:column;align-items:stretch}
.stats{flex-direction:column}
}
</style>
</head>
<body data-theme="dark">

<header>
  <div class="header-wrap flex flex-wrap">
    <div>
      <h1>üî• GitHub Trending</h1>
      <div class="subtitle">Updated daily via GitHub Actions</div>
    </div>
    <button class="btn" onclick="toggleTheme()" id="theme-btn">üåô Dark</button>
  </div>
</header>

<div class="filters flex flex-wrap">
  <button class="btn active" data-range="daily" onclick="filterRange('daily')">Daily</button>
  <button class="btn" data-range="weekly" onclick="filterRange('weekly')">Weekly</button>
  <button class="btn" data-range="monthly" onclick="filterRange('monthly')">Monthly</button>
</div>

<main>
  <div class="stats flex" id="stats" style="display:none">
    <div class="stats-item">
      <span class="stats-label">Repos</span>
      <span class="stats-value" id="count">0</span>
    </div>
    <div class="stats-item">
      <span class="stats-label">Languages</span>
      <span class="stats-value" id="langs">0</span>
    </div>
    <div class="stats-item">
      <span class="stats-label">Updated</span>
      <span class="stats-value" id="date">-</span>
    </div>
  </div>
  
  <ul id="container" class="list">
    <li class="skeleton"><div class="skeleton-title"></div><div class="skeleton-text"></div></li>
    <li class="skeleton"><div class="skeleton-title"></div><div class="skeleton-text"></div></li>
    <li class="skeleton"><div class="skeleton-title"></div><div class="skeleton-text"></div></li>
  </ul>
</main>

<footer>
  <p>Data from <a href="https://github.com/trending" target="_blank" rel="noopener">GitHub Trending</a></p>
</footer>

<script>
const langColors={JavaScript:'#f1e05a',TypeScript:'#3178c6',Python:'#3572A5',Java:'#b07219','C++':'#f34b7d',C:'#555',Go:'#00ADD8',Rust:'#dea584',Ruby:'#701516',PHP:'#4F5D95',Swift:'#ffac45',Kotlin:'#A97BFF',HTML:'#e34c26',CSS:'#563d7c',Shell:'#89e051',Vue:'#41b883'};
let allRepos=[],currentRange='daily';

function fmt(n){const num=parseInt(String(n).replace(/,/g,''));return num>=1e3?(num/1e3).toFixed(1)+'k':n}
function getColor(l){return langColors[l]||'#8b949e'}

function render(repos){
  const c=document.getElementById('container');
  if(!repos||!repos.length){
    c.innerHTML='<div class="error"><h2>No repos found</h2><p>Try different filters</p></div>';
    return;
  }
  const frag=document.createDocumentFragment();
  repos.forEach(r=>{
    const li=document.createElement('li');
    li.className='list-item';
    li.innerHTML=`
      <a href="${r.url}" target="_blank" rel="noopener">${r.name}</a>
      <div class="desc">${r.desc||'No description'}</div>
      <div class="meta">
        <span><span class="lang-dot" style="background:${getColor(r.language)}"></span>${r.language||'Unknown'}</span>
        <span>‚≠ê ${fmt(r.stars)}</span>
      </div>
    `;
    frag.appendChild(li);
  });
  c.innerHTML='';
  c.appendChild(frag);
  
  const langs=new Set(repos.map(r=>r.language).filter(Boolean));
  document.getElementById('count').textContent=repos.length;
  document.getElementById('langs').textContent=langs.size;
  document.getElementById('date').textContent=new Date().toLocaleDateString();
  document.getElementById('stats').style.display='flex';
}

async function load(){
  try{
    const res=await fetch('data.json');
    if(!res.ok)throw new Error('Fetch failed');
    allRepos=await res.json();
    render(allRepos);
  }catch(e){
    console.error('Load error:',e);
    document.getElementById('container').innerHTML='<div class="error"><h2>Failed to load</h2><p>Check console</p></div>';
  }
}

function filterRange(range){
  currentRange=range;
  document.querySelectorAll('.btn[data-range]').forEach(b=>b.classList.toggle('active',b.dataset.range===range));
  render(allRepos.filter(r=>!r.range||r.range===range));
}

function toggleTheme(){
  const body=document.body;
  const theme=body.getAttribute('data-theme')==='dark'?'light':'dark';
  body.setAttribute('data-theme',theme);
  localStorage.setItem('theme',theme);
  document.getElementById('theme-btn').textContent=theme==='dark'?'üåô Dark':'‚òÄÔ∏è Light';
}

window.addEventListener('DOMContentLoaded',()=>{
  const theme=localStorage.getItem('theme')||'dark';
  document.body.setAttribute('data-theme',theme);
  document.getElementById('theme-btn').textContent=theme==='dark'?'üåô Dark':'‚òÄÔ∏è Light';
  load();
});
</script>

</body>
</html>
